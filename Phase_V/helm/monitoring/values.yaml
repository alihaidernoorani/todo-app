# kube-prometheus-stack overrides for the todo app
# Usage: helm install prometheus-stack prometheus-community/kube-prometheus-stack \
#          --namespace monitoring --create-namespace \
#          -f helm/monitoring/values.yaml

prometheus:
  prometheusSpec:
    retention: 15d
    # Allow Prometheus to discover ServiceMonitors in all namespaces
    serviceMonitorSelectorNilUsesHelmValues: false
    serviceMonitorSelector: {}
    serviceMonitorNamespaceSelector: {}
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
      limits:
        cpu: 500m
        memory: 1Gi

grafana:
  adminPassword: changeme-in-production
  persistence:
    enabled: true
    size: 10Gi
  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
      - name: default
        orgId: 1
        folder: Todo App
        type: file
        disableDeletion: false
        options:
          path: /var/lib/grafana/dashboards/default

alertmanager:
  alertmanagerSpec:
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 100m
        memory: 128Mi
